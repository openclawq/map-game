# 🎮 "map" 游戏项目 - 完整设计文档

## 项目概述
- **类型：** HTML 网页游戏
- **项目：** 地理知识问答游戏
- **范围：** 中国地图 + 世界地图
- **部署：** 上传到网站供玩家游玩

---

## 游戏模式

### 模式1：省份点击（待起可爱名称）
**地图：** 空白中国地图（仅外边界）

**玩法：**
- 系统出题：如"吉林省"
- 玩家点击地图上对应省份位置
- 题目数量：10题

**评分：** 根据准确率给出成语评价

---

### 模式2：省会定位（待起可爱名称）
**地图：** 显示省界，隐藏城市坐标

**玩法：**
- 系统出题：如"黑龙江省会"
- 玩家点击省会城市位置
- 题目数量：10题

**评分：** 计算所有点击位置与实际位置的真实地理距离总和

**反馈：** 显示玩家点击点和实际位置，标出差距

---

### 模式3：世界地图版本
**地图：** 空白世界地图（仅边界）

**玩法：**
- 国家 / 国家首都 / 世界主要大城市（前50）
- 玩法类似模式1和模式2

---

## 数据资源

### 需要的数据文件
1. **中国地图：**
   - 外边界
   - 34个省级行政区的边界
   - 省会城市坐标

2. **世界地图：**
   - 世界地图边界
   - 国家边界
   - 国家首都坐标
   - 世界主要大城市坐标（前50）

### 数据格式
- **格式：** GeoJSON
- **来源：** 开源免费数据（GitHub 或阿里 DataV）

---

## 技术实现

### 开发策略
- **代码生成：** 使用 askCodex skill
- **测试：** Playwright 自动化测试 + 人工反馈

### 核心技术
- **前端：** HTML + CSS + JavaScript
- **地图渲染：** GeoJSON + D3.js/Leaflet
- **坐标转换：** 地理坐标 ↔ 地图像素坐标
- **距离计算：** 真实地理距离（经纬度计算）
- **交互：** 支持鼠标点击 + 触摸操作

### 响应式设计
- **适配设备：** 手机 + 平板 + 桌面
- **地图操作：** 缩放 + 平移（无滚动条）

---

## UI/UX 设计

### 视觉风格
- **配色：** 古典风格，类似三国游戏

### 界面元素
1. **首页：**
   - 模式选择按钮
   - 开始游戏按钮

2. **游戏页：**
   - 地图显示区域
   - 当前题目显示
   - 进度条（1/10）
   - 下一题按钮

3. **结果页：**
   - 成语评价
   - 详细结果（真实边界/城市位置/玩家位置/差距）
   - 重新开始按钮

---

## 项目结构
```
~/games/map/
├── index.html          # 主页面
├── css/
│   └── style.css      # 样式文件（古典风格）
├── js/
│   ├── game.js        # 游戏逻辑
│   └── utils.js       # 工具函数（距离计算、坐标转换等）
├── data/
│   ├── china-provinces.geojson  # 中国省界
│   ├── china-cities.json        # 中国城市坐标
│   ├── world-countries.geojson  # 世界国家
│   ├── world-cities.json        # 世界城市坐标
│   └── README.md                # 数据说明
├── tests/
│   └── game-test.js   # Playwright 测试
└── docs/
    └── design.md      # 设计文档
```

---

## 实施步骤

### Phase 1: 数据收集
- 搜索并下载 GeoJSON 地图数据
- 整理城市坐标数据
- 编写数据说明文档

### Phase 2: 核心开发（使用 Codex）
- 定义数据结构
- 实现地图渲染
- 实现游戏逻辑
- 实现交互功能

### Phase 3: 测试与优化
- Playwright 自动化测试
- 移动端适配测试
- 性能优化

### Phase 4: 部署
- 上传到网站
- 最终人工测试

---

## 关键需求总结

### 游戏机制
- ✅ 题目数量固定 10 题
- ✅ 模式选择：玩家可选择模式1或模式2
- ✅ 评价系统：使用成语评价

### 数据与资源
- ✅ 数据格式：GeoJSON
- ✅ 数据来源：开源免费数据
- ✅ 世界主要大城市：前50大城市

### 技术细节
- ✅ 距离计算：真实地理距离
- ✅ 移动端支持：必须支持触摸操作
- ✅ 测试方案：Playwright 自动化测试 + 人工反馈

### 设计与 UX
- ✅ 配色风格：古典风格（类似三国游戏）
- ✅ UI 元素：开始按钮、模式选择、进度条、结果页面
- ✅ 响应式设计：缩放 + 平移（无滚动条）

---

**文档创建时间：** 2026-02-19 21:23
**状态：** 已确认 ✓
