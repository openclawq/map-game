<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>地理知识问答 - 三国风</title>
  <link rel="stylesheet" href="css/style.css?v=20260220-6" />
</head>
<body>
  <div class="bg-pattern" aria-hidden="true"></div>

  <main id="app">
    <section id="home-page" class="page">
      <h1 class="title">地理知识问答</h1>
      <p class="subtitle">运筹帷幄，决胜千里</p>
      <p id="home-version" class="version-text">版本：-</p>

      <div id="mode-selection" class="card mode-grid">
        <button data-mode="province-click">省份大挑战</button>
        <button data-mode="city-click">省会定位</button>
        <button data-mode="world-province">世界国家挑战</button>
        <button data-mode="world-city">世界城市定位</button>
      </div>

      <div class="card difficulty-box">
        <label for="province-difficulty">省份挑战难度</label>
        <select id="province-difficulty" aria-label="省份挑战难度选择">
          <option value="easy">简单（悬停提示）</option>
          <option value="hard">困难（关闭悬停提示）</option>
        </select>
      </div>

      <p id="loading-text" class="muted">正在加载地图与题库数据...</p>
      <p id="error-text" class="error hidden" role="alert"></p>
    </section>

    <section id="game-page" class="page hidden">
      <div id="header" class="card header-row">
        <span id="mode-title">模式</span>
        <span id="progress">1/10</span>
        <span id="live-score">得分</span>
      </div>

      <div id="question-box" class="card question-row">
        <span id="question">请点击：</span>
        <span id="feedback" class="feedback"></span>
      </div>

      <div id="map-container" class="map-shell" aria-label="地图答题区域"></div>

      <div id="dev-tools" class="card dev-tools hidden" aria-label="开发日志面板">
        <div class="dev-tools-header">
          <strong>开发日志（隐藏功能）</strong>
          <div class="dev-tools-actions">
            <button id="dev-copy-btn" type="button">复制日志</button>
            <button id="dev-clear-btn" type="button" class="secondary">清空</button>
            <button id="dev-toggle-btn" type="button" class="secondary">隐藏</button>
          </div>
        </div>
        <textarea id="dev-log-output" readonly spellcheck="false"></textarea>
      </div>

      <div id="controls" class="card controls">
        <button id="next-btn" disabled>下一题</button>
        <button id="quit-btn" class="secondary">返回首页</button>
      </div>
      <p id="game-version" class="version-text">版本：-</p>
    </section>

    <section id="result-page" class="page hidden">
      <h2 id="score-text" class="result-title">结果</h2>
      <div id="details" class="card details"></div>
      <div id="map-review" class="map-shell review" aria-label="答题复盘地图"></div>
      <div id="history-list" class="card history"></div>
      <div class="card controls">
        <button id="restart-btn">再来一局</button>
        <button id="home-btn" class="secondary">返回首页</button>
      </div>
      <p id="result-version" class="version-text">版本：-</p>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js"></script>
  <script src="js/utils.js?v=20260220-6"></script>
  <script src="js/game.js?v=20260220-6"></script>
</body>
</html>
